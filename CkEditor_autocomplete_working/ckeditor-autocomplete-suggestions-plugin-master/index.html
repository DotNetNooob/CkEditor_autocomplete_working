<html>

<head>
    <link rel="stylesheet" href="resources/libs/bootstrap/css/bootstrap.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="resources/css/custom-css.css" type="text/css" media="screen" />
</head>

<body>
<div class="margin-top-50">
    <div class="row text-center margin-top-50">
        <button type="button" class="btn btn-info" id="getNewSuggestionsButton1">Load Suggestions 1</button>
        <button type="button" class="btn btn-warning" id="getNewSuggestionsButton2">Load Suggestions 2</button>
    </div>
    <div class="row margin-top-50">
        <div class="col-sm-10 col-sm-offset-1">
            <textarea cols="80" id="ckeditorBox" name="ckeditorBox" class="editor" rows="10"></textarea>
        </div>
    </div>
    <div class="row margin-top-50">
        <div class="col-sm-10 col-sm-offset-1">
            <p class="color-red">Press '#' to show suggestions</p>
        </div>
    </div>
</div>
</body>
<script type="text/javascript" src="resources/libs/jquery/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="resources/libs/ckeditor/ckeditor.js"></script>
<script type="text/javascript" src="resources/libs/ckeditor/adapters/jquery.js"></script>
<!-- <script type="text/javascript" src="resources/js/index.js"></script> -->
<script>
    $(document).ready(function () {
        // Index.init();
        var suggestions= [{ "id": "[$Name$]", "label": "Name" }, { "id": "[$CustomerProfile$]", "label": "Customer Profile" }, { "id": "[$Email$]", "label": "Email" }, { "id": "[$Phone$]", "label": "Phone" }];

        initCkEditor(suggestions);
        bindEvents(suggestions);
        //$('#getNewSuggestionsButton1').click();

        // bindEvents = function () {
        function bindEvents (suggestions) {
            // $('#getNewSuggestionsButton1').on('click', function () {
            CKEDITOR.instances.ckeditorBox.execCommand('reloadSuggetionBox', suggestions);
            //});
        }

        // initCkEditor = function () {
        function initCkEditor (suggestions) {
            //Here "CKEDITOR.SHIFT + 51" is the key combination for '#'
            $('textarea#ckeditorBox').ckeditor({ suggestionsTriggerKey: { keyCode: CKEDITOR.SHIFT + 51 } });
            CKEDITOR.on('instanceReady', function (evt) {
                //Here 'Index.suggestions' is the Array which is holding the current list of suggestions
                CKEDITOR.instances.ckeditorBox.execCommand('reloadSuggetionBox', suggestions);
            });
        }

    });
</script>

</html>